name: Release Firmware

on:
  push:
    tags:
      - 'v*.*.*'  # Triggers on version tags like v1.0.0, v2.1.3, etc.

jobs:
  release:
    uses: ./.github/workflows/release.yml
    with:
      environment_name: adafruit_feather_esp32c6
      artifact_prefix: BLELights
      python_version: '3.11'
      include_elf: true
      draft: false
      prerelease: false
      release_body: |
        ## ESP32-C6 BLE LED Controller with Photo Viewer
        
        ### Firmware Release ${{ github.ref_name }}
        
        **Hardware:** Adafruit Feather ESP32-C6 / Waveshare ESP32-C6-LCD-1.47
        
        ### Features
        - BLE-controlled RGB LED
        - SD card photo slideshow with fade transitions
        - LVGL display interface
        
        ### Installation
        1. Download `BLELights-${{ github.ref_name }}.bin`
        2. Flash using esptool: `esptool.py --chip esp32c6 --port /dev/ttyUSB0 write_flash 0x0 BLELights-${{ github.ref_name }}.bin`
        3. Or use the Arduino IDE / PlatformIO upload tools
        
        ### Usage
        - Insert SD card with JPEG images for photo slideshow
        - Connect via BLE (device name: ESP32C6-LED)
        - Send RGB values to control LED color
